# 디지털 감옥 (The Digital Prison) - 에이전트 설계 문서

## 1. 시나리오 마스터 (Scenario Agent)
**역할:** 스토리텔러 & 세계관 관리자
**특징:**
- LangChain 메모리를 활용하여 사용자의 모든 선택과 대화를 기억합니다.
- 사용자의 행동에 따라 동적으로 스토리 분기를 생성합니다.
- 전체적인 나레이션과 NPC 대사를 생성합니다.

## 2. 퍼즐 아키텍트 (Puzzle Agent)
**역할:** 퍼즐 및 미니게임 설계자
**특징:**
- **RAG (Retrieval-Augmented Generation):** 기존 방탈출 트릭 데이터베이스에서 적절한 퍼즐을 검색하고 상황에 맞게 변형합니다.
- **코딩 스킬:** 자바스크립트 기반의 미니게임(암호 해독, 회로 연결 등)을 즉석에서 코딩하여 생성합니다.
- 이미지 속에 숨겨진 단서나 논리 퀴즈를 설계합니다.

## 3. 비주얼 일러스트레이터 (Vision & Image Agent)
**역할:** 시각 정보 처리 & 이미지 생성
**특징:**
- **DALL-E 3:** 현재 방의 상황, 조명, 분위기를 반영한 고퀄리티 이미지를 실시간으로 생성합니다.
- **Vision:** 사용자가 업로드한 사진(힌트, 실제 사물 등)을 분석하여 게임 내 단서로 변환하거나 스토리에 반영합니다.

## 4. 시스템 가이드 (Artifacts Manager)
**역할:** UI/UX 및 상태 관리자
**특징:**
- **HTML/CSS/JS 렌더링:** 게임의 인벤토리, 타이머, 미니맵, 현재 상태 등을 Artifact(웹 화면)에 시각적으로 아름답게 구현합니다.
- 게임의 메타 데이터(남은 시간, 잠금 해제율)를 관리하고 시각화합니다.

---

# 게임 루프 (Game Loop)
1.  **시나리오 마스터**가 현재 상황을 서술합니다.
2.  **시스템 가이드**가 현재 상태(체력, 인벤토리 등)를 반영한 UI를 렌더링합니다.
3.  **비주얼 일러스트레이터**가 장면을 이미지로 생성합니다.
4.  **사용자**가 행동(텍스트 입력 또는 이미지 업로드)을 합니다.
5.  **시나리오 마스터**가 입력을 해석합니다.
    - 퍼즐이 필요한 경우 -> **퍼즐 아키텍트**가 퍼즐/미니게임을 생성합니다.
    - 힌트 이미지가 업로드된 경우 -> **비주얼 일러스트레이터**가 분석합니다.
6.  결과에 따라 스토리가 진행되고, **시스템 가이드**가 UI를 업데이트합니다.
